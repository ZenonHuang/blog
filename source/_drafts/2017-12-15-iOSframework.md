# 库是什么？

库是咱们封装好的代码，便于复用的。例如 Github 上我们可以看到的开源库，开箱即用。

下面我们主要说的，是编译成二进制的库。

## 什么场景使用二进制的库?

- 保护源代码。日常开发中，各种商业 SDK 就属于此类。暴露头文件使用，隐藏具体的实现。
- 加快编译速度。因为是编译完成的二进制，所以编译的时候只需要 Link 一下。

# 动态库与静态库

根据 Link 的方式，分了两种库的，静态库和动态库。

## 什么是静态库？

静态库，即静态链接库。不同平台的文件格式如下:


| 系统 | 静态库文件格式 | 
| --- | --- | 
| Windows | .lib |
| Linux | .a  |
| MacOS | .a  |

静态库的特点，在于编译的时候会直接复制到目标程序里。

意味着代码在目标程序中，不会再改变了。如图:

![3D044AD0-C6D0-40E4-ABD7-AB07945E6E26](http://7xiym9.com1.z0.glb.clouddn.com/3D044AD0-C6D0-40E4-ABD7-AB07945E6E26.png)


## 什么是动态库？

动态库，即动态链接库。
不同平台的文件格式如下:

| 系统 | 动态库文件格式 | 
| --- | --- | 
| Windows | .dll |
| Linux | .so  |
| MacOS | .dylib  |

动态库的特点，在于编译的时候，并不会被拷贝到目标程序中。

目标程序中，只会存储指向动态库的引用。程序运行时，动态库才真正被加载。

而同一个动态库，可以被多个程序使用。如图:

![91EDA5EA-2038-4B89-9ECB-BAA8DD4D94FE](http://7xiym9.com1.z0.glb.clouddn.com/91EDA5EA-2038-4B89-9ECB-BAA8DD4D94FE.png)


## iOS 里的 Framework 是动态库还是静态库?

Framework 可以是动态库，也可以是静态库。

Framework 实际上是一种打包方式，将库的二进制文件，头文件和有关的资源文件打包到一起，方便管理和分发。

真正动态的 Framework ，只有苹果自家的 UIKit.Framework，Foundation.Framework 等。

iOS 开发者上传含有动态库的app，苹果需要动态库和 App的签名一致，而且上架再经过一次 App Store 的签名。所以你想在线更新动态库，首先你得有苹果APPStore私钥，而这个基本不可能。

所以，iOS 上的动态库只能是私有的，我们仍然不能将动态库文件放置在除了自身沙盒以外的其它任何地方。

由于 iOS 的沙盒机制，所以每个 App 都只能用自己对应签名的动态库。做不到多个 App 使用一个动态库，这就丧失了动态库的优势。

不同的程序之间不能共享代码，同时动态下载代码又是被苹果明令禁止的，没办法发挥出动态库的优势，实际上动态库也就没有存在的必要了。


### Embedded Framework 又是什么？

## 区别(二者使用场景)是什么？

# 如何生成动态库？

# 使用 Xcode 6 以上版本，制作动态及静态 Framework

## 动态 Framework 

### ‘Embedded Binaries’ 设置

Reason: Image Not Found

###  cpu 架构兼容

我们制作动态库的时候，选的设备是模拟器，如果选真机的话，那生成的库也只能在真机上使用，那我们该怎样制作一个通用的动态库呢?

Build Settings—>Build Active Architecture Only（只构建活跃的架构）—-> NO
什么叫只构建活跃的架构？所谓活跃的架构是指当前选中的模拟器的架构，你选中的就称为活跃的，你没有选中的那些称为不活跃的，重新编译（Command + B）一下静态库，可以拖到测试项目中选中各种模拟器进行测试都是正常的。

#### 合并不同架构 Framework

我们知道模拟器版本的静态库和真机版的是不能通用的，那么怎样让一个静态库即支持模拟器又支持真机呢？

使用终端 lipo -create Xxx1.a Xxx2.a -output Xxx.a

合并后同时支持i386、armv7、x86_64、arm64 这四种架构，合并就是将两个.a文件相加，合并后文件的大小是两个文件之和。通常自己制作静态库给别人用一般是给两个发布版对应的模拟器和真机版本，不给合并版本，因为用户想合并可以自己进行合并，如果给用户一个合并版的，用户则无法分解的。

### 静态 Framework 


# 参考

>[iOS 静态库，动态库与 Framework](https://segmentfault.com/a/1190000004920754)

>[iOS 静态库和动态库的基本介绍和使用](http://ios.jobbole.com/89871/) 

